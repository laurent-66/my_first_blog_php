{% extends "template.html.twig" %}
{% block body %} 
<div class="container-fluid mx-0 my-0 px-0 mx-0" id="dashboard">
      <div class="heading">
          <h2>Administration des blogs et commentaires</h2>
      </div>
<div class="container-dashboard">
    <ul class="nav nav-tabs">
        <li class="nav-item">
        <a class="nav-link active tab-text" id="tab-blogs" href="#blogs" role="tab" data-toggle="tab">Blogs</a>
        </li>
        <li class="nav-item">
        <a class="nav-link tab-text" id="tab-comment" href="#commentaires" role="tab" data-toggle="tab">Commentaires</a>
        </li>
    </ul>
    <div class="tab-content">
        <a href="/blogs/admin/new"><button class="btn btn-success btn-block mb-3 new-blog-button">Cr√©er un nouveau blog</button></a>
        <div id="blogs" role="tabpanel" class="tab-pane active">
            {% for blog in blogs %}
            <div class="row border-top border-dark">
                <div class="line-info-list my-3">
                    <div class="col 10 row-align-start-left">
                        <div class="col4 item-list font-weight-bold"><p>{{blog.last_update}}</p></div>
                        <div class="col4 item-list"><p>{{blog.title}}</p></div>
                        <div class="col4 item-list"><p>{{blog.chapo}}</p></div>

                    </div>
        
                    <div class="col 2 row-align-start-right">
                        <div class="col4"><a href={{'/blogs/'~blog.id}}><button class="btn btn-lg btn-primary btn-block mb-3 my-auto"><i class="far fa-eye"></i></button></a></div>
                        {% if ( user != null) %}
                            <div class="col4"><a href={{'/blogs/admin/'~blog.id~'/edit'}}><button class="btn btn-lg btn-warning btn-block mb-3 my-auto"><i class="fas fa-edit"></i></button></a></div>
                            <div class="col4"><a href={{'/blogs/admin/'~blog.id~'/delete'}}><button class="btn btn-lg btn-danger btn-block mb-3 my-auto"><i class="fas fa-trash-alt"></i></button></a></div>
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <div id="commentaires" role="tabpanel" class="tab-pane">
            {% for comment in commentsNotValidate %}
                <div class="comment-line row">
                    <div class="col8"><p class="mx-3 my-3">{{comment.commentContent}}</p></div>
                    <div class="col4 mr-3">
                        <div class="row px-0 mx-0">
                            <div class="col button-comment-line px-0 mx-2"><a href={{'/blog/admin/approveComment/'~comment.blog_post_id_blog_post~'/'~comment.id }}><button type="button" class="btn btn-success btn-block my auto">approuver</button></a></div>
                            <div class="col button-comment-line px-0 mx-2"><a href={{'/blog/admin/deleteComment/'~comment.blog_post_id_blog_post~'/'~comment.id }}><button type="button" class="btn  btn-danger btn-block my auto">Supprimer</button></a></div>
                        </div>
                    </div>
                </div>    
            {% endfor %}
        </div>
    </div>
</div>    
{% endblock %} 
